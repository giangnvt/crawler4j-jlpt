Verb-casual, past + 上で: after, upon
Verb-dictionary form + 上で: when, for, in order to
Noun + 上で: after, when